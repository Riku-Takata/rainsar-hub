from pathlib import Path

file_path = Path(r"d:\sotsuron\rainsar-hub\result\result.md")

append_content = """
## 5. 追加解析: 負の差分（Negative Diff）に着目した分析

「降雨により後方散乱強度が低下する（差分がマイナスになる）」という仮説に基づき、短時間（<1時間）のイベントにおいて、差分が負（マイナス）になったピクセルのみを抽出して解析しました。

### 解析結果 (<1時間, 負のピクセルのみ)

| 対象 | 負ピクセルの割合 | 平均差分 (Mean) | 中央値差分 (Median) | 標準偏差 (Std) |
| :--- | :--- | :--- | :--- | :--- |
| **道路** | 30.5% | -0.029 | **-0.008** | 0.069 |
| **田んぼ** | 24.2% | -0.128 | **-0.096** | 0.175 |

### 考察
1.  **道路の負ピクセル**: 中央値が **-0.008** と非常にゼロに近く、これは単なる測定ノイズ（ゼロ付近のゆらぎ）である可能性が高いです。
2.  **田んぼの負ピクセル**: 中央値が **-0.096** と、道路に比べて**桁違いに大きな減少**を示しています。
    *   **物理的解釈**: 田んぼ全体の約24%のピクセルで、降雨により後方散乱強度が劇的に低下しています。これは、田んぼに水が溜まり、鏡面反射（Specular Reflection）が起きて電波が前方に散乱してしまった（レーダーに戻ってこない）可能性を示唆しています。
3.  **透水性推定への示唆**:
    *   従来の「全体の中央値（正の増加）」は土壌水分の増加（誘電率上昇）を捉えていますが、この「負のピクセル群」は**冠水・浸水**を捉えている可能性があります。
    *   透水性（水が染み込む速度）を見るなら「正の変化」を、冠水リスクを見るなら「負の変化」を見るという使い分けが有効かもしれません。
"""

if file_path.exists():
    with open(file_path, "a", encoding="utf-8") as f:
        f.write(append_content)
    print(f"Appended to {file_path}")
else:
    print(f"File not found: {file_path}")
